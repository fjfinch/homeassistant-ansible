- id: '1708472646046'
  alias: automation-motion-kitchen
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.signify_netherlands_b_v_sml003_occupancy_2
    to: 'on'
    id: motion
  - platform: state
    entity_id:
    - binary_sensor.signify_netherlands_b_v_sml003_occupancy_2
    to: 'off'
    id: no-motion
    for:
      hours: 0
      minutes: 2
      seconds: 0
  - platform: state
    entity_id:
    - light.helper_light_kitchen
    to: 'on'
    for:
      hours: 0
      minutes: 30
      seconds: 0
    id: no-motion
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - motion
    - condition: state
      state: 'off'
      entity_id: light.helper_light_kitchen
    then:
    - service: light.turn_on
      target:
        entity_id:
        - light.helper_light_kitchen
      data: {}
  - if:
    - condition: trigger
      id:
      - no-motion
    - condition: state
      state: 'on'
      entity_id: light.helper_light_kitchen
    then:
    - service: light.turn_off
      target:
        entity_id:
        - light.helper_light_kitchen
      data: {}
  mode: single
- id: '1715010154294'
  alias: automation-evening
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.signify_netherlands_b_v_sml004_illuminance
    for:
      hours: 0
      minutes: 0
      seconds: 0
    below: 550
    id: turn-on
  - platform: numeric_state
    entity_id:
    - sensor.signify_netherlands_b_v_sml004_illuminance
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: turn-off
    above: 575
  - platform: time
    at: 01:00:00
    enabled: true
    id: turn-off
  condition:
  - condition: state
    entity_id: sensor.sun_solar_rising
    state: 'False'
  action:
  - if:
    - condition: trigger
      id:
      - turn-on
      enabled: true
    then:
    - if:
      - condition: state
        entity_id: light.helper_light_all
        state: 'off'
      then:
      - service: light.turn_on
        target:
          entity_id: light.helper_light_all
        data:
          brightness_pct: 1
    - service: adaptive_lighting.change_switch_settings
      data:
        entity_id: switch.adaptive_lighting_test2
        autoreset_control_seconds: '300'
      enabled: true
    - service: adaptive_lighting.set_manual_control
      data:
        manual_control: true
        entity_id: switch.adaptive_lighting_test2
      enabled: true
    - service: light.turn_on
      data:
        brightness_pct: 80
        transition: 300
      enabled: true
      target:
        entity_id:
        - light.helper_light_kitchen
        - light.helper_light_bed
        - light.helper_light_living
    - service: light.turn_on
      target:
        entity_id:
        - light.helper_light_hall
      data:
        transition: 300
        brightness_pct: 40
      enabled: true
    - service: adaptive_lighting.change_switch_settings
      data:
        use_defaults: configuration
        entity_id: switch.adaptive_lighting_test2
      enabled: true
  - if:
    - condition: trigger
      id:
      - turn-off
    - condition: state
      entity_id: light.helper_light_all
      state: 'on'
    then:
    - service: light.turn_off
      data:
        transition: 10
      target:
        entity_id: light.helper_light_all
    - service: notify.send_message
      metadata: {}
      data:
        message: EVENING - turn OFF
    enabled: true
  mode: single
- id: '1715803115351'
  alias: automation-remote
  description: ''
  trigger:
  - device_id: 89d6bbe7751aeb89cd3830d0c6644683
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: turn_on
    id: 'on'
  - device_id: 89d6bbe7751aeb89cd3830d0c6644683
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_up
    id: up
  - device_id: 89d6bbe7751aeb89cd3830d0c6644683
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: dim_down
    id: down
  - device_id: 89d6bbe7751aeb89cd3830d0c6644683
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: left
    id: left
  - device_id: 89d6bbe7751aeb89cd3830d0c6644683
    domain: zha
    platform: device
    type: remote_button_short_press
    subtype: right
    id: right
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - 'on'
    then:
    - service: light.toggle
      target:
        entity_id: light.helper_light_all
      data: {}
  - if:
    - condition: trigger
      id:
      - up
    then:
    - service: light.toggle
      data: {}
      target:
        entity_id:
        - light.helper_light_living
  - if:
    - condition: trigger
      id:
      - down
    then:
    - service: light.toggle
      target:
        entity_id:
        - light.helper_light_kitchen
      data: {}
  - if:
    - condition: trigger
      id:
      - left
    then:
    - service: light.toggle
      target:
        entity_id:
        - light.helper_light_bed
      data: {}
  - if:
    - condition: trigger
      id:
      - right
    then:
    - service: light.toggle
      target:
        entity_id:
        - light.helper_light_hall
      data: {}
  mode: single
- id: '1716369171251'
  alias: automation-morning
  description: ''
  trigger:
  - platform: time
    at: 09:00:00
    id: turn-on-time
  - platform: time
    at: input_datetime.helper_time_offset
    id: turn-on-alarm
    enabled: true
  - platform: numeric_state
    entity_id:
    - sensor.signify_netherlands_b_v_sml003_illuminance_4
    above: 90
    id: turn-off
  condition:
  - condition: state
    entity_id: sensor.sun_solar_rising
    state: 'True'
  action:
  - if:
    - condition: trigger
      id:
      - turn-on-time
      - turn-on-alarm
      enabled: true
    - condition: template
      value_template: "{% if now().hour < 12 %}\n  {{ (trigger.id in ['turn-on-alarm']
        or trigger.id in ['turn-on-time'] and states('sensor.kb2003_next_alarm') in
        [\"unknown\",\"unavailable\"]) and is_state('input_boolean.helper_already_turned_on',
        'off') }}\n{% else %}\n  {{ trigger.id in ['turn-on-time'] }}\n{% endif %}"
      enabled: true
    then:
    - if:
      - condition: state
        entity_id: light.helper_light_all
        state: 'off'
      then:
      - service: light.turn_on
        target:
          entity_id: light.helper_light_all
        data:
          brightness_pct: 1
    - service: adaptive_lighting.change_switch_settings
      data:
        entity_id: switch.adaptive_lighting_test2
        autoreset_control_seconds: '900'
      enabled: true
    - service: adaptive_lighting.set_manual_control
      data:
        manual_control: true
        entity_id: switch.adaptive_lighting_test2
      enabled: true
    - service: light.turn_on
      target:
        entity_id:
        - light.helper_light_kitchen
        - light.helper_light_living
        - light.helper_light_bed
      data:
        brightness_pct: 100
        transition: 900
      enabled: true
    - service: light.turn_on
      target:
        entity_id:
        - light.helper_light_hall
      data:
        transition: 900
        brightness_pct: 40
      enabled: true
    - service: adaptive_lighting.change_switch_settings
      data:
        entity_id: switch.adaptive_lighting_test2
        use_defaults: configuration
      enabled: true
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.helper_already_turned_on
      data: {}
    enabled: true
  - if:
    - condition: trigger
      id:
      - turn-off
      enabled: true
    then:
    - if:
      - condition: state
        entity_id: light.helper_light_all
        state: 'on'
      then:
      - service: light.turn_off
        data:
          transition: 10
        target:
          entity_id:
          - light.helper_light_all
      - service: notify.notify
        metadata: {}
        data:
          message: MORNING - turn OFF
    - service: input_boolean.turn_off
      target:
        entity_id: input_boolean.helper_already_turned_on
      data: {}
    enabled: true
  mode: single
- id: '1716546587327'
  alias: automation-door
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.lumi_lumi_magnet_agl02_opening
    to: 'on'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - service: notify.notify
    metadata: {}
    data:
      message: '{{ now().strftime(''%H:%M'') }} | FRONT DOOR IS STILL OPEN'
  mode: single
- id: '1717112927230'
  alias: automation-motion-hall
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.signify_netherlands_b_v_sml003_occupancy_3
    id: motion
    for:
      hours: 0
      minutes: 0
      seconds: 0
    to: 'on'
  - platform: state
    entity_id:
    - binary_sensor.signify_netherlands_b_v_sml003_occupancy_3
    to: 'off'
    id: no-motion
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: time
    before: 09:00:00
    enabled: true
  action:
  - if:
    - condition: trigger
      id:
      - motion
    - condition: state
      entity_id: light.helper_light_all
      state: 'off'
    then:
    - service: light.turn_on
      target:
        entity_id:
        - light.helper_light_hall
      data:
        brightness_pct: 25
  - if:
    - condition: trigger
      id:
      - no-motion
    - condition: state
      entity_id: light.helper_light_hall
      state: 'on'
    - condition: state
      entity_id: light.helper_light_living
      state: 'off'
    then:
    - service: light.turn_off
      target:
        entity_id:
        - light.helper_light_hall
      data: {}
  mode: single
- id: '1717333599006'
  alias: automation-home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.lumi_lumi_magnet_agl02_opening
    to: 'on'
    id: turn-on
  - platform: state
    entity_id:
    - binary_sensor.helper_motion_home
    to: 'off'
    for:
      hours: 1
      minutes: 0
      seconds: 0
    id: turn-off
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - turn-on
    - condition: state
      entity_id: binary_sensor.helper_motion_home
      state: 'off'
    - condition: numeric_state
      entity_id: sensor.signify_netherlands_b_v_sml004_illuminance
      below: 550
    - condition: state
      entity_id: light.helper_light_all
      state: 'off'
    then:
    - service: light.turn_on
      target:
        entity_id: light.helper_light_all
      data: {}
  - if:
    - condition: trigger
      id:
      - turn-off
    - condition: state
      entity_id: light.helper_light_all
      state: 'on'
    then:
    - service: light.turn_off
      target:
        entity_id: light.helper_light_all
      data: {}
  mode: single
- id: '1717334326593'
  alias: automation-beamer-sound
  description: ''
  trigger:
  - platform: state
    entity_id:
    - media_player.optoma_hd146x
    id: turn-on
    from: unavailable
    enabled: true
  - platform: state
    entity_id:
    - media_player.optoma_hd146x
    to: unavailable
    id: turn-off
    enabled: true
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - turn-on
    then:
    - if:
      - condition: state
        entity_id: media_player.denon_dra_800h
        state: 'off'
      then:
      - service: media_player.turn_on
        target:
          entity_id: media_player.denon_dra_800h
        data: {}
    - if:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.denon_dra_800h
          attribute: source
          state: CBL/SAT
      then:
      - service: media_player.select_source
        target:
          entity_id: media_player.denon_dra_800h
        data:
          source: CBL/SAT
  - if:
    - condition: trigger
      id:
      - turn-off
    - condition: state
      entity_id: media_player.denon_dra_800h
      state: 'on'
    - condition: state
      entity_id: media_player.denon_dra_800h
      attribute: source
      state: CBL/SAT
    then:
    - service: media_player.turn_off
      target:
        entity_id:
        - media_player.denon_dra_800h
      data: {}
  mode: single
- id: '1717852366829'
  alias: automation-air-purifier
  description: ''
  trigger:
  - platform: numeric_state
    entity_id:
    - sensor.i_9psl_pm2_5
    above: 5
    id: turn-on
  - platform: numeric_state
    entity_id:
    - sensor.i_9psl_pm2_5
    id: turn-off
    below: 2
    for:
      hours: 0
      minutes: 15
      seconds: 0
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - turn-on
    - condition: state
      entity_id: switch.ikea_of_sweden_tretakt_smart_plug_switch
      state: 'off'
    then:
    - service: switch.turn_on
      metadata: {}
      data: {}
      target:
        entity_id: switch.ikea_of_sweden_tretakt_smart_plug_switch
    - service: notify.notify
      metadata: {}
      data:
        message: Air purifier ON
  - if:
    - condition: trigger
      id:
      - turn-off
    - condition: state
      entity_id: switch.ikea_of_sweden_tretakt_smart_plug_switch
      state: 'on'
    then:
    - service: switch.turn_off
      metadata: {}
      data: {}
      target:
        entity_id: switch.ikea_of_sweden_tretakt_smart_plug_switch
    - service: notify.notify
      metadata: {}
      data:
        message: Air purifier OFF
  mode: single
- id: '1718114251248'
  alias: automation-receiver
  description: ''
  trigger:
  - platform: state
    entity_id:
    - media_player.philips_43pus8506_2
    from: 'off'
    to: 'on'
    id: turn-on-tv
  - platform: state
    entity_id:
    - media_player.philips_43pus8506_2
    from: 'on'
    to: 'off'
    id: turn-off-tv
  - platform: state
    entity_id:
    - media_player.optoma_hd146x
    from: unavailable
    id: turn-on-beamer
  - platform: state
    entity_id:
    - media_player.optoma_hd146x
    to: unavailable
    id: turn-off-beamer
  condition: []
  action:
  - if:
    - condition: trigger
      id:
      - turn-on-beamer
      - turn-on-tv
    then:
    - if:
      - condition: state
        entity_id: media_player.denon_dra_800h
        state: 'off'
      then:
      - service: media_player.turn_on
        target:
          entity_id: media_player.denon_dra_800h
        data: {}
    - if:
      - condition: trigger
        id:
        - turn-on-beamer
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.denon_dra_800h
          attribute: source
          state: CBL/SAT
      then:
      - service: media_player.select_source
        target:
          entity_id: media_player.denon_dra_800h
        data:
          source: CBL/SAT
    - if:
      - condition: trigger
        id:
        - turn-on-tv
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.denon_dra_800h
          attribute: source
          state: TV Audio
      then:
      - service: media_player.select_source
        target:
          entity_id: media_player.denon_dra_800h
        data:
          source: TV Audio
  - if:
    - condition: trigger
      id:
      - turn-off-tv
      - turn-off-beamer
    - condition: state
      entity_id: media_player.denon_dra_800h
      state: 'on'
    then:
    - if:
      - condition: trigger
        id:
        - turn-off-tv
      - condition: state
        entity_id: media_player.denon_dra_800h
        attribute: source
        state: TV Audio
      then:
      - service: media_player.turn_off
        target:
          entity_id:
          - media_player.denon_dra_800h
        data: {}
    - if:
      - condition: trigger
        id:
        - turn-off-beamer
      - condition: state
        entity_id: media_player.denon_dra_800h
        attribute: source
        state: CBL/SAT
      then:
      - service: media_player.turn_off
        target:
          entity_id:
          - media_player.denon_dra_800h
        data: {}
  mode: single
- id: '1718215321142'
  alias: automation-smartphone-alarm
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.kb2003_next_alarm
  condition: []
  action:
  - if:
    - condition: template
      value_template: '{{ trigger.to_state.state in ["unknown","unavailable"] }}'
    then:
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.helper_time_offset
      data:
        datetime: '1970-01-01 00:00:00'
    else:
    - service: input_datetime.set_datetime
      target:
        entity_id: input_datetime.helper_time_offset
      data:
        timestamp: '{{ (as_timestamp(trigger.to_state.state) | int ) - 15*60 }}'
      enabled: true
  mode: single
